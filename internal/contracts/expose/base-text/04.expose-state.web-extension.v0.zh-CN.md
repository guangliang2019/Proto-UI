# Expose State Web 扩展（v0）

> Status: Draft – v0
>
> Web 扩展：将 expose-state 映射为 DOM `data-*` 属性和 CSS 变量。这是 Web-only 的可选扩展，不改变 expose-state 语义。

---

## 0. 范围与非目标

- Web 上的映射策略
- name → attr/var 规则
- 生命周期与同步

不涉及：

- 写能力
- 跨平台保证

---

## 1. 默认映射

### 1.1 语义名 → DOM 名

- `btn.disabled` → `data-btn-disabled` 与 `--pui-btn-disabled`
- 规则：trim，`.`/空格 → `-`，非字母数字 → `-`，小写

### 1.2 类型驱动映射

- enum/string → attr
- bool → attr（true: 空字符串；false: 移除）
- number.discrete → attr + css var
- number.range → css var

---

## 2. 覆盖（可选）

通过 `EXPOSE_STATE_WEB_MODE_CAP` 覆盖：

- `allowContinuousAttr`
- `allowStringVar`

---

## 3. 生命周期

- 订阅驱动同步
- dispose 后清理

---

## 4. 最小测试覆盖

- bool/enum/string/number 离散/连续映射
- 语义名映射规则
